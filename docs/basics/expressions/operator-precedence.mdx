import Admonition from '@components/Admonition.astro'

# Operator precedence

When you mix [operators](https://go.dev/ref/spec#Operators) of different kind, there are some precedence rules, to determine what operations are performed first. From higher to lower precedence:

1. Parentheses — add them when in doubt.
2. Unary operators — `+x`, `-x`, `!x`, `^x`, `*p`, `&x` (apply before binary ops)
3. Multiplicative:
   - `*`, `/`, `%` (multiplication, division, remainder)
   - `<<`, `>>` (bitwise shifts)
   - `&`, `&^` (bitwise AND, AND NOT)
4. Additive:
   - `+`, `-` (addition, subtraction)
   - `|`, `^` (bitwise OR, XOR)
5. Comparison — `==`, `!=`, `<`, `<=`, `>`, `>=`
6. Logical AND — `&&`
7. Logical OR — `||`

<Admonition variant="tip" title="Evaluation order">
Within each precedence level, operators associate left‑to‑right. Parentheses always take precedence, and unary operators apply before binary operators.
</Admonition>

## Bitwise Shifts are like Multiplication/Division

Shifts scale by powers of two. A left shift by `n` multiplies by `2^n`; a right shift by `n` divides by `2^n` (for unsigned values):

- `a << 2` ≈ `a * 4`
- `c >> 1` ≈ `c / 2`

Similarly, bitwise AND appears in the same group as multiplication, while bitwise OR and XOR share the group with addition because their precedence mirrors those arithmetic operations.

## Bitwise AND/OR are like Addition

Bitwise AND (`&`) groups with the multiplicative operators, while bitwise OR (`|`) and XOR (`^`) group with the additive operators. This affects how mixed expressions are parsed without parentheses.

## Some Examples

Let's start with a few arithmetic and mixed examples:

```go
a, b, c := 2, 3, 4

r1 := 2 + 3*4     // 14  (× before +)
r2 := (2 + 3) * 4 // 20  (parentheses change it)

x := a << 2       // 8   (2 * 2^2)
y := c >> 1       // 2   (4 / 2^1)

z := 2 & 7 + 4    // 6   (& has higher precedence: (2 & 7) + 4)
w := 2 | 4 + 1    // 7   (| and + same group; left-to-right: (2 | 4) + 1)
```

A bitwise shift is equivalent to multiplying or dividing by powers of two:

```go
x := a << 2    // a * 2^2 == 8
y := c >> 1    // c / 2^1 == 2
```

Whereas a bitwise AND is equivalent to multiplication in precedence:

```go
z := 2 & 7 + 4 //  == 2
```

And a bitwise OR is equivalent to addition in precedence:

```go
w := 2 | 4 + 1 //  == 7
```

A couple quick checks:

```go
r1 := 2 + 3*4    // 14  (× before +)
r2 := (2 + 3) * 4// 20  (parentheses change it)

ok := a < b && b < c  // comparison binds before &&
```


