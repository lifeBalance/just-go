import Admonition from '@components/Admonition.astro'
import { Code } from 'astro-expressive-code/components'
import mainGo from 'code/scope/main.go?raw'
import some from 'code/scope/somepackage/some.go?raw'
import some2 from 'code/scope/somepackage/some2.go?raw'

# Variable Scope

In the previous section we saw how declaring a variable using the `:=` shorthand syntax is only allowed inside functions. That implies that using the other `var` syntax, we can also declare variables outside functions!

Variables in Go can have different **scope levels** depending on where they are declared:

- **Block Scope**: Variables declared inside a **function** or a **block** (like an `if` statement or a `for` loop) are only accessible within that block.
- **Package Scope**: Variables declared at the package level (outside any function) are accessible throughout the entire package.

<Admonition type="info" title="Variable Scope">
The **scope** of a variable refers to the region of the code where that variable is accessible. When we try to access a variable in some part of the code where it's not accessible, we say that it's **out of scope**.
</Admonition>

## An example

Imagine we have the following code:

```
myapp/
â”œâ”€â”€ go.mod
â”œâ”€â”€ main.go
â””â”€â”€ somepkg
    â”œâ”€â”€ some.go
    â””â”€â”€ some2.go
```

In `some.go` we have declared a couple of variables outside of any function, or in other words, in the **package scope**. The only difference is that `SomeVar` is exported, and `someVar` is not:

<Code code={some} lang='go' title='myapp/somepkg/some.go' />

Then, in `some2.go` we have declared the `DoSomething` function, which access the `someVar` variable that we declared in `some.go` (even though it's not exported). Since we're in the same `somepkg` package, we don't need to use dot notation.

<Code code={some2} lang='go' title='myapp/somepkg/some2.go' />

In `main.go` we import the `somepkg` and use its **exported members** (the ones which start with uppercase) using **dot notation**: 

<Code code={mainGo} lang='go' title='myapp/main.go' />

The main points here are:

- Variables in the **package scope** are available in the same package, regardless if they're exported or not.
- Only **exported variables** are available from other packages, as long as we import the package where they're defined.

<Admonition title='Exported Members'>
In Go, everything (variables, constants, functions, etc) we define in the **package scope** is available for importing from other packages only if their names start with an **uppercase letter**.
</Admonition>

Be cautious when defining variables in the package scope, as it can lead to bugs hard to track and tight coupling between packages. It's fine to define and export **constants**, to expose any necessary data needed accross our application:

```go
package config

const APIKey string = "12345"
const BaseURL string = "https://api.example.com"
const DatabasePort int = 5432
```

## Shadowing

When a variable declared in an inner scope has the same name as a variable in an outer scope, the inner variable **shadows** the outer one:

```go
package main

import "fmt"

var name string = "Global Name" // Package-level variable

func main() {
    name := "Local Name" // ðŸ‘‡ Shadows the package-level variable
    fmt.Println(name)    //  ðŸ‘‰ Local Name
}
```