import Admonition from '@components/Admonition.astro'
import { Code } from 'astro-expressive-code/components'

import stringsMain from './code/strings/main.go?raw'


# Strings

A [string](https://go.dev/ref/spec#String_types) in Go is a sequence of **bytes**. For example:

<Code code={stringsMain} lang="go" />

The output of the program above will be:

```
Char | Dec | Hex   | Binary     | Unicode
-----+-----+-------+------------+---------
  H  |  72 | 0x48  | 0b01001000 | U+0048
  i  | 105 | 0x69  | 0b01101001 | U+0069
  !  |  33 | 0x21  | 0b00100001 | U+0021
```

In the example above, we declare a variable `greeting` of type `string` and assign it the value `"Hi!"`. Then we use a `for` loop to traverse the string, printing each character as a hexadecimal number. The point being, that a string is just a **sequence of bytes** that can be interpreted in different ways (in this example we're printing each character in different formats). 

<Admonition type="tip" title="Use strings for text">
  Go strings can hold arbitrary bytes (the language doesn‚Äôt enforce UTF‚Äë8).
  However, by convention, strings are used for storing **UTF-8 encoded** text. For binary data, use
  `[]byte`.
</Admonition>

The [predeclared identifier](https://golang.org/ref/spec#Predeclared_identifiers) for strings values is `string`.

## String Literals

We can define strings in our programs directly by wrapping text, using either **double quotes** or **backticks** are known as [string literals](https://golang.org/ref/spec#String_literals). There are two types:

- **Interpreted string literals** are are the most commonly used; they're just text surrounded by double quotes:

```go
var greeting string = "Hello, World!"
```

<Admonition type="warning" title="Only single line">
  One limitation of using double quotes, interpreted string literals is that our
  string cannot span multiple lines.
</Admonition>

- **Raw string literals** use **backticks**, and they can span **multiple lines**:

```go
var multiLine string = `This is a
multi-line string.`
```

Raw string literals can be used to write HTML, and regular expressions.

<Admonition type="info" title="Runes">

In other languages, we can use single quotes for strings, but in Go, single quotes are used for rune literals (which represent a **single character**). In Go, the **single quote** syntax is reserved for defining runes, which are usually used to represent individual Unicode code points.

<Code lang="go" code="var letter rune = 'A'" />

</Admonition>

## Length of a String

We can get the length of a string using the [len](https://go.dev/ref/spec#Length_and_capacity) built-in function. For example:

```go
var greeting string = "Hello, World!"
length := len(greeting) // length is 13
```

The length returned is the number of **bytes** in the string, not the number of characters. So if we do:

```go
var emoji string = "üåç"

fmt.Println(len(emoji)) // 4
```

The length is `4` because the emoji character "üåç" is represented using 4 bytes in UTF-8 encoding.

## Accessing Characters in a String

You can access individual characters in a string using [index expressions](https://go.dev/ref/spec#Index_expressions). As in many other programming languages, in Go, strings are also **zero-based**, which means that the index of the first character is `0`, the second character is at index `1`, and so on. For example:

```go
var greeting string = "Hello, World!"
firstChar := greeting[0] // 'H'
secondChar := greeting[1] // 'e'
```

## Empty Strings

A string may consist of an **empty sequence of characters**, what is known as an **empty string**.

```go
emptyString := ""

fmt.Println(len(emptyString)) // 0
```

## Strings are Immutable

In Go, strings are **immutable**, meaning that once created, it is impossible to change any of its characters:

```go
greeting[0] = 'h' // ‚ùå This will result in a compilation error
```

Any operation that seems to modify a string actually creates a new string.

```go
original := "Hello"
modified := original + ", World!" // Creates a new string
fmt.Println(original) // Outputs: Hello
fmt.Println(modified) // Outputs: Hello, World!
```

## Unicode and UTF-8

In Go, [strings](https://go.dev/ref/spec#String_types) are usually used to store sequences of [UTF-8](https://en.wikipedia.org/wiki/UTF-8) characters. That means that we can use emojis in our strings:

```go
var greeting string = "Hello, üåç!"
```

<Admonition type="info" title="UTF-8 and variable-width characters">
  **UTF-8** is the most widely used
  [Unicode](https://en.wikipedia.org/wiki/Unicode) encoding. Each Unicode
  character has a unique identifying number called a **code point** The UTF-8
  encoding is the standard encoding for text files, XML and JSON files. It uses
  between one and four bytes to represent each code point. **ASCII** is a subset
  of UTF-8, its code points use one byte.
</Admonition>

In Go, each character in a string can use from 1 to 4 bytes depending on the character being stored. For example, whenever storing [ASCII](https://en.wikipedia.org/wiki/ASCII) characters, only 1 byte is used per character. But for storing other characters, like emojis, more bytes are needed.

<Admonition type="info" title="Fixed-width characters">
  In other languages, such as C, strings are sequences of characters with
  exactly **1 byte**. ASCII is by far the most common character set used in C
  implementations, and faces the limitation of being able to represent only 128
  different characters. This is not the case in Go, where strings are sequences
  of **bytes** that can represent a much larger set of characters thanks to
  UTF-8 encoding.
</Admonition>

## Escape sequences

String literals support embedding **escape sequences**, which are characters with special meaning. The table below lists some of them:

| Escape       | Meaning                                                           |
| :----------- | :---------------------------------------------------------------- |
| `\\`         | Backslash \                                                       |
| `\ooo`       | Unicode character with the given 3-digit 8-bit octal code point   |
| `\'`         | Single quote (‚Äò); only allowed inside character literals          |
| `\"`         | Double quote (‚Äù); only allowed inside interpreted string literals |
| `\a`         | ASCII bell (BEL)                                                  |
| `\b`         | ASCII backspace (BS)                                              |
| `\f`         | ASCII formfeed (FF)                                               |
| `\n`         | ASCII linefeed (LF)                                               |
| `\r`         | ASCII carriage return (CR)                                        |
| `\t`         | ASCII tab (TAB)                                                   |
| `\uhhhh`     | Unicode character with the given 4-digit 16-bit hex code point    |
| `\Uhhhhhhhh` | Unicode character with the given 8-digit 32-bit hex code point    |
| `\v`         | ASCII vertical tab (VT)                                           |
| `\xhh`       | Unicode character with the given 2-digit 8-bit hex code point     |
