import Admonition from '@components/Admonition.astro'

# Wrapping Errors

Add context to errors with `fmt.Errorf` and `%w`, and inspect them with `errors.Is` and `errors.As`.

```go
package main

import (
    "errors"
    "fmt"
)

var ErrNotFound = errors.New("not found")

type ResourceError struct {
    ID string
}

func (e ResourceError) Error() string { return fmt.Sprintf("resource %s failed", e.ID) }

func lookup(id string) error {
    // Imagine a failed lookup
    return fmt.Errorf("lookup %s: %w", id, ErrNotFound)
}

func main() {
    err := lookup("abc")

    // Test for a specific error
    if errors.Is(err, ErrNotFound) {
        fmt.Println("not found")
    }

    // Extract typed error
    var re ResourceError
    if errors.As(err, &re) {
        fmt.Println("resource error:", re.ID)
    }
}
```

<Admonition variant="tip" title="When to wrap">
Wrap when you cross boundaries (I/O, network, DB) or add actionable context. Prefer `%w` so callers can still test the original cause.
</Admonition>
