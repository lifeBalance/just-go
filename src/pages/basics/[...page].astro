---
import SidebarLayout from '../../layouts/SidebarLayout.astro'

// Simple, no maps: let static paths enumerate files, then load the exact match
const pages = import.meta.glob('/src/content/basics/**/*.mdx')

export async function getStaticPaths() {
  const files = Object.keys(pages)
  return files.map((fs) => {
    const page = fs
      .replace('/src/content/basics/', '')
      .replace(/index\.mdx$/, '')
      .replace(/\.mdx$/, '')
    return { params: { page } }
  })
}

const param = Astro.params.page || ''
const candidates = [
  `/src/content/basics/${param}.mdx`,
  `/src/content/basics/${param}/index.mdx`,
]
const loader = candidates.map((p) => pages[p]).find(Boolean)
if (!loader) {
  throw new Error(`Basics page not found: ${param}`)
}
const mod = await loader()
const Page = (mod as any).default
---

<SidebarLayout heading="Basics">
  <Page />
</SidebarLayout>
